{% extends "base.html" %}
{% block title %}Ex√°menes de Laboratorio{% endblock %}

{% block content %}
<div class="container mt-4">
  <h2>üß™ Ex√°menes de Laboratorio</h2>

  <!-- Buscador -->
  <div class="mb-3 d-flex justify-content-end">
    <form method="GET" action="{{ url_for('param.laboratorios') }}" class="d-flex">
      <input type="text" name="q" class="form-control form-control-sm me-2"
             placeholder="Buscar por nombre o grupo..."
             value="{{ q or '' }}">
      <button type="submit" class="btn btn-outline-light btn-sm">
        <i class="fas fa-search"></i> Buscar
      </button>
    </form>
  </div>

  <table class="table table-sm table-striped">
   <thead class="table-dark">
  <tr>
    <th>ID</th>
    <th>Nombre examen</th>
    <th>Grupo</th>
    <th style="width:110px;">Activo</th>
    <th style="width:120px;">Acciones</th>
  </tr>
</thead>
<tbody>
  {% for ex in examenes %}
  <tr>
    <td>{{ ex.id }}</td>
    <td>
      <a href="{{ url_for('param.laboratorio_detalle', examen_id=ex.id) }}">
        {{ ex.nombre }}
      </a>
    </td>
    <td>{{ ex.grupo or '-' }}</td>
    <td>
      <form method="POST"
            action="{{ url_for('param.laboratorio_toggle', examen_id=ex.id) }}"
            style="display:inline">
        {% if ex.activo %}
        <button type="submit" class="btn btn-success btn-sm px-3 py-1">S√≠</button>
        {% else %}
        <button type="submit" class="btn btn-secondary btn-sm px-3 py-1">No</button>
        {% endif %}
      </form>
    </td>
    <td>
      <form method="POST"
            action="{{ url_for('param.laboratorio_eliminar', examen_id=ex.id) }}"
            style="display:inline"
            onsubmit="return confirm('¬øEliminar examen {{ ex.nombre }} y todos sus par√°metros?');">
        <button type="submit" class="btn btn-danger btn-sm px-3 py-1">
          ELIMINAR
        </button>
      </form>
    </td>
  </tr>
  {% endfor %}
</tbody>
 
  </table>

  <a href="{{ url_for('menu.inicio') }}" class="btn btn-secondary btn-sm">‚Üê Volver al men√∫</a>
</div>
{% endblock %}
